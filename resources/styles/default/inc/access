# Define the access restrictions
# The following tags define the restrictions:
# mkgmap:bike
# mkgmap:foot
# mkgmap:car
# mkgmap:truck
# mkgmap:taxi
# mkgmap:bus
# mkgmap:emergency
# mkgmap:delivery
# A class is not allowed to use the way if its tag is set to 'no'

motorcar=destination   { set mkgmap:throughroute=no; delete motorcar } 
motorcycle=destination { set mkgmap:throughroute=no; delete motorcycle } 
access=destination     { set mkgmap:throughroute=no; delete access }
bicycle=destination    { delete bicycle }
foot=destination       { delete foot }                  
hgv=destination        { delete hgv }                  
psv=destination        { delete psv }                  
taxi=destination       { delete taxi }                  
emergency=destination  { delete emergency }                  
delivery=destination   { delete delivery }                  
goods=destination      { delete goods }                  

# set (override) specific restrictions                        
bicycle=*    { set mkgmap:bike='${bicycle|subst:private=>no}' }
foot=*       { set mkgmap:foot='${foot|subst:private=>no}' }                  
hgv=*        { set mkgmap:truck='${hgv|subst:private=>no}' }                  
motorcar=*   { set mkgmap:car='${motorcar|subst:private=>no}' }
psv=*        { set mkgmap:bus='${psv|subst:private=>no}' }                  
taxi=*       { set mkgmap:taxi='${taxi|subst:private=>no}' }                  
emergency=*  { set mkgmap:emergency='${emergency|subst:private=>no}' }                  
delivery=*   { set mkgmap:delivery='${delivery|subst:private=>no}' }                  
goods=*      { set mkgmap:delivery='${goods|subst:private=>no}' }                  

# Translate motor_vehicle and vehicle access rules.
motorcycle=*    { add mkgmap:car='${motorcycle|subst:private=>no}' }                  
motor_vehicle=* { add mkgmap:car='${motor_vehicle|subst:private=>no}' }
vehicle=*       { add mkgmap:car='${vehicle|subst:private=>no}'; add mkgmap:bike='${vehicle|subst:private=>no}' }

# the access tag defines all restrictions
access=* { addaccess '${access|subst:private=>no}' }

highway=* & motorroad=yes               { add mkgmap:bike=no; add mkgmap:foot=no }
highway=motorway|highway=motorway_link  { add mkgmap:bike=no; add mkgmap:foot=no }
highway=pedestrian & area!=yes          { add mkgmap:foot=no; addaccess no } 
highway=bridleway                       { add mkgmap:bike=yes; add mkgmap:foot=yes; addaccess no }
highway=cycleway                        { add mkgmap:bike=yes; add mkgmap:foot=yes; addaccess no }
highway=footway|highway=path|highway=steps { add mkgmap:foot=yes; addaccess no }
railway=platform                        { add mkgmap:foot=yes; addaccess no }

# check for carpool lane 
(carpool=yes | carpool=designated | carpool=permissive | carpool=official)     { set mkgmap:carpool=yes }
